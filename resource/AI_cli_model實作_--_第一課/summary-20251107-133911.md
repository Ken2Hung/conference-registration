# 課程總結

> 生成時間：2025-11-07 13:39:11
> 來源逐字稿：recording-20251106-160701-transcript.txt
> 生成模型：OpenAI GPT-5-mini (gpt-5-mini-2025-08-07)
> 處理方式：單階段總結

---

## 議程重點
- 介紹本堂主題：以「命令列模式（CLI mode）」整合 AI coding agent，提升團隊開發的生產力與穩定性。
- 實作三大 CLI 工具：OpenAI Codex CLI、Anthropic Claude Code CLI、Google Gemini CLI（含安裝、設定與操作示範）。
- 比較 CLI 與 IDE extension（如 GitHub Copilot）的使用體驗與差異。
- Workshop 流程：安裝 CLI、建立專案 workspace、用 Gemini 產生設計/PR 文件、用 Python/Codex/Copilot 產生/審查程式碼、以 git diff 檢查變更。
- CLI 模式下的資源調整與管理：模型版本切換、上下文（Context / 記憶檔）設定、工具（tool）呼叫與子 agent（subagent）運作。
- Agentic Coding Workflow 的實務要點：subagent 分工（文件、實作、code review）、hooks（before/after）、sandbox（執行隔離）、非交互模式（non-interactive）、中斷與 rollback 機制。
- 安全性與成本提醒：API key 與權限管理、服務條款（程式碼被用於訓練的風險）、token / usage、避免開啟 YOLO / danger 模式。

## 技術新知
- 工具與命令（範例）
  - Cloud Code（Google / Claude 類似 agent CLI）：常見指令 cloud、initial、help、clear、compact、add、allow、editor；workspace 與全域/專案等級的 cloud/*.md（例如 AGENTS.md、GEMINI.md、Cloud.md）。
  - Copilot / GitHub CLI：GH compiler、Copilot CLI（最近演進為更完整 CLI），但對自訂 command 支援有限。
  - Open-source Cloud Code Router：把 CLI 請求 filter 並 route 到指定 endpoint（可連到 OpenAI、本地 endpoint 或其他）。
  - Gemini CLI / Claude Code / Codex CLI：可在 CLI 模式下非交互執行（batch / non-interactive），並產生 markdown、PR、程式碼片段。
- Agent 架構
  - 主 agent + subagents 模式：subagent 可分別負責文件生成 (PR/設計)、實作（implement）、code review。
  - Subagent 的沙盒（sandbox）與工具清單（web-fetch、bash、console.log 等）。
  - Hooks：在執行前後插入自定義動作（例如紀錄 log、觸發通知、執行外部 command）。
  - Editor：可以中斷 / 編輯 subagent 的執行結果以串接後續步驟。
- 上下文與資源限制
  - Context 長度與記憶限制（課堂提到約 200K 的上下文上限）。
  - 每次傳送完整 NCP/context 會耗費 token，需做「compress / compact / summary」以節省費用與提升穩定性。
  - Cloud Code 中對 bash 輸出長度限制（約 30,000 字元）與每小時/每日使用上限（示例：一千次等提醒）。
  - Agent Skill（新功能）：將大量 NCP 濃縮成短摘要以供後續調用，減少上下文重量。
- 安全、權限與成本管理
  - API Key 管理與權限授予（allow/deny、workspace 層級、避免開啟 YOLO/danger 模式）。
  - 服務條款與訓練資料問題：部分服務會聲明上傳的程式碼可被用作模型訓練，使用敏感程式碼需特別注意。
  - Usage/成功率監控：CLI 會提供 usage、success rate、remaining quota 等資訊，建議定期檢查並清理不必要的 NCP。
- 實務經驗與限制
  - CLI 模式常比 IDE extension 在某些工作流（一次性複雜任務、非交互化 pipeline）表現更好，但穩定性、輸出長度、費用與權限控制需更細緻管理。
  - 非交互模式適合自動化 pipeline，但要處理中斷、rollback、subagent 之間的資料傳遞問題。

## 結論
- CLI mode 是把 AI agent 深度整合入開發流程的有效方式：適合自動化、非交互與 pipeline 化的程式碼產出與 review 流程。
- 三大 CLI（Codex / Claude Code / Gemini）各有強項與差異，實務上可根據團隊需求（品質、成本、权限與生態）選擇並採取混合路由策略（例如透過 Cloud Code Router 指向不同 endpoint）。
- 要達到穩定且可控的人機協作（Agentic Coding Workflow），除了工具安裝與操作外，關鍵在於：
  - 明確的 workspace 與記憶檔（AGENTS.md / GEMINI.md / Cloud.md）管理，
  - 嚴謹的權限與 API key 管理（避免開啟危險模式、注意訓練權利）,
  - 上下文壓縮與 selective NCP 傳遞以控制成本與提高準確性，
  - 使用 hooks、sandbox 與 rollback 機制來降低自動化失控風險。
- 實作練習（如課中用 Gemini 產生設計、用 Codex/Python 生成程式並以 Copilot 做 code review）能快速體會 CLI workflow 的效益與風險。

## 進一步學習
- 工具與文件
  - 熟讀並實作三大 CLI 官方文件與 Best Practices：Anthropic Claude Code、OpenAI Codex、Google Gemini CLI（參考課堂提供的三篇參考資料）。
  - 建立並維護專案級的 AGENTS.md、GEMINI.md、Cloud.md 作為團隊共享的開發上下文。
- 實作練習（建議練習清單）
  - 實際安裝並登入三個 CLI，完成一次端到端 pipeline：設計文（Gemini）→ 產生程式（Codex / Python CLI）→ code review（Copilot CLI / Claude）。
  - 實作 subagent 流程：建立主 agent + 2–3 個 subagents（document、implement、review），觀察資料傳遞、執行時間與費用。
  - 練習 hooks 與 sandbox：在執行前後加 log、限制執行環境（Docker）、測試中斷與 rollback 流程。
  - 使用 Cloud Code Router 或自建 proxy，把 CLI 請求 route 到不同 endpoint（OpenAI / 本地 LLM /其他），比較品質與成本。
- 安全與成本管理
  - 設計 API key 與權限管理策略（環境變數、密鑰管理服務、最小權限原則），並在 onboarding 文件中載明服務條款風險（訓練權利）。
  - 設定 usage / token monitoring（告警與配額），並實作「compact/clear」例行工作以控制上下文使用量。
- 進階主題
  - 研究 Agent Skill 與 context-compression 模式，學習如何把大量 NCP 濃縮成可重用摘要。
  - 深入理解 CLI 與 IDE extension 在 UX 與 API 設計上的差異；針對常見開發場景選擇最適合的模式。
  - 學習 SDD（Software Design Document）結構與如何以 AI 自動化產生高品質 SDD 供 agent 參考。
- 推薦學習步驟（短期到中期）
  1. 本週：完成三個 CLI 的安裝與登入，建立一個小專案（text-adventure）並用 Gemini 產生 README/PR 範例。
  2. 下週：把產出串成 pipeline（非交互模式），加入 subagent 與簡單 hook，測試中斷與 rollback。
  3. 一個月內：實作權限 & cost 監控、試驗 Cloud Code Router，並整理團隊的 AGENTS.md 與使用守則。

如需，我可以幫你：
- 針對某一個 CLI（例如 Claude Code 或 Gemini）產出「安裝 & 初始設定」的步驟清單與範例指令；
- 或者提供一份 AGENTS.md / GEMINI.md 的範本，方便直接放入專案。要哪一項請告訴我。